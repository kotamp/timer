{"version":3,"sources":["hooks/audio.js","hooks/timer.js","hooks/table.js","styled/Button.js","components/Header.js","components/ActionStatus.js","components/ErrorMessage.js","styled/Select.js","styled/Input.js","components/InputArea.js","components/HelpMessage.js","App.js","reportWebVitals.js","index.js"],"names":["urls","defaultTime","Date","now","stringify","table","str","i","length","duration","name","slice","reducer","state","action","idx","field","value","to","type","parseInt","isNaN","Math","min","max","result","useTable","defaultTable","useState","error","setError","useReducer","setTable","tableString","setLink","loadHash","useCallback","hash","window","location","tokens","split","num","parseFloat","isFinite","decodeURIComponent","e","push","tryParse","err","useEffect","addEventListener","styled","button","ButtonRow","nav","Header","React","memo","running","onRunning","onReset","audio","onAudio","Button","onClick","MainInfo","h1","StyledActionStatus","div","SecondHeader","h2","SecondText","ActionStatus","currentAction","currentDuration","nextAction","nextDuration","restTime","toFixed","Container","ErrorMessage","children","select","input","Ul","ul","Li","li","props","current","InputArea","changeTable","gotoAction","add","remove","edit","event","target","changeIndex","map","className","Select","onChange","_","Input","onInput","Link","a","hashSection","href","lastIndexOf","url","rel","StyledApp","App","time","setTime","setInterval","useTimer","prevTime","currentTime","audioEl","setAudioEl","working","setWorking","size","Audio","switchAudio","playAudio","readyState","HTMLMediaElement","HAVE_CURRENT_DATA","play","audioError","useAudio","position","setPosition","setRunning","setRestTime","savedAction","setSavedAction","nextPosition","diff","newPosition","useMemo","HelpMessage","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","activeElement","classList","contains","blur"],"mappings":"iPAEMA,EAAO,CAAC,wBAAyB,yB,OCAjCC,EAAc,CAACC,KAAKC,MAAOD,KAAKC,O,OCkChCC,EAAY,SAACC,GAEjB,IADA,IAAIC,EAAM,GACDC,EAAI,EAAGA,EAAIF,EAAMG,OAAQD,IAChCD,GAAOD,EAAME,GAAGE,SAAW,IAAMJ,EAAME,GAAGG,KAAO,IAInD,MADsB,OAAlBJ,EAAIK,OAAO,KAAaL,EAAMA,EAAIK,MAAM,GAAI,IACzCL,GAGHM,EAAU,SAACC,EAAOC,GAAY,IAC5BC,EAA0BD,EAA1BC,IAAKC,EAAqBF,EAArBE,MAAOC,EAAcH,EAAdG,MAAOC,EAAOJ,EAAPI,GACzB,OAAQJ,EAAOK,MACb,IAAK,MACH,MAAM,GAAN,mBAAWN,GAAX,CAAkB,CAAEH,KAAM,aAAcD,SAAU,MAEpD,IAAK,SAEH,OAAqB,IAAjBI,EAAML,OAAqBK,EACzB,GAAN,mBAAWA,EAAMF,MAAM,EAAGI,IAA1B,YAAmCF,EAAMF,MAAMI,EAAM,KAEvD,IAAK,OAEH,GAAc,aAAVC,EAAsB,CAGxB,GAFc,KAAVC,IAAcA,EAAQ,GAC1BA,EAAQG,SAASH,GACbI,MAAMJ,GAAQ,OAAOJ,EACzB,GAAII,EAAQ,EAAG,OAAOJ,EAExB,MAAM,GAAN,mBACKA,EAAMF,MAAM,EAAGI,IADpB,4BAEOF,EAAME,IAFb,kBAEoBC,EAAQC,KAF5B,YAGKJ,EAAMF,MAAMI,EAAM,KAGzB,IAAK,OAIH,GAHYO,KAAKC,IAAIR,EAAKG,KACdI,KAAKE,IAAIT,EAAKG,GAET,OAAOL,EACxB,IAAMY,EAASZ,EAAMF,QAGrB,OAFAc,EAAOV,GAAOF,EAAMK,GACpBO,EAAOP,GAAML,EAAME,GACZU,EAET,IAAK,MACH,OAAOR,EAET,QACE,OAAOJ,IAuCEa,EAnCE,SAACC,GAAkB,IAAD,EACPC,mBAAS,MADF,mBAC1BC,EAD0B,KACnBC,EADmB,OAEPC,qBAAWnB,EAASe,GAFb,mBAE1BtB,EAF0B,KAEnB2B,EAFmB,OAGFJ,oBAAS,kBAAMxB,EAAUuB,MAHvB,mBAG1BM,EAH0B,KAGbC,EAHa,KAK3BC,EAAWC,uBAAY,WAC3B,IAAIC,EAAOC,OAAOC,SAASF,KAE3B,GADgB,MAAZA,EAAK,KAAYA,EAAOA,EAAK1B,MAAM,IACnB,IAAhB0B,EAAK7B,OAAT,CAHiC,MA5FpB,SAACF,GAChB,IAAIkC,EAASlC,EAAImC,MAAM,KAEW,KAA9BD,EAAOA,EAAOhC,OAAS,KACzBgC,EAASA,EAAO7B,MAAM,GAAI,IAK5B,IAFA,IAAMc,EAAS,GAENlB,EAAI,EAAGA,EAAIiC,EAAOhC,OAAQD,IAAK,CACtC,IAAMmC,EAAMC,WAAWH,EAAOjC,IAC9B,KAAMqC,SAASF,IAAQA,GAAO,GAC5B,MAAO,CAAC,GAAD,OAAInC,EAAJ,kDAA+CiC,EAAOjC,KAG/D,IAAIG,EAAO,GAEX,KAAMH,EAAIiC,EAAOhC,OACf,IACEE,EAAOmC,mBAAmBL,EAAOjC,IACjC,MAAOuC,GACP,MAAO,CAAC,GAAD,OAAIvC,EAAJ,2CAAwCuC,EAAxC,iBAAkDN,EAAOjC,KAIpEkB,EAAOsB,KAAK,CACVtC,SAAUiC,EACVhC,KAAMA,IAIV,MAAO,CAAC,KAAMe,GAkEUuB,CAASX,GALE,mBAK1BY,EAL0B,KAKrBxB,EALqB,KAMjC,GAAIwB,EAAK,OAAOnB,EAASmB,GAEzBnB,EAAS,MACTE,EAAS,CAAEb,KAAM,MAAOF,MAAOQ,IAC/BS,EAAQ9B,EAAUqB,OACjB,IAgBH,OAbAyB,qBAAU,WACJZ,OAAOC,SAASF,KAAK7B,OAAS,GAChC2B,IAEFG,OAAOa,iBAAiB,cAAc,WACpChB,SAED,CAACA,IAEJe,qBAAU,WACRhB,EAAQ9B,EAAUC,MACjB,CAACA,IAEG,CAAEA,QAAO2B,WAAUH,QAAOI,gB,4WCvHpBmB,UAAOC,OAAtB,K,uRCGA,IAAMC,EAAYF,IAAOG,IAAV,KA8BAC,EAdAC,IAAMC,MAAK,gBAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,UAAWC,EAAvB,EAAuBA,QAASC,EAAhC,EAAgCA,MAAOC,EAAvC,EAAuCA,QAAvC,OACxB,mCACE,mDACmB,sCAASJ,EAAU,UAAY,gBAElD,eAACL,EAAD,WACE,cAACU,EAAD,CAAQC,QAASL,EAAjB,SAA6BD,EAAU,OAAS,QAChD,cAACK,EAAD,CAAQC,QAASJ,EAAjB,yBACA,cAACG,EAAD,CAAQC,QAASF,EAAjB,SACGD,EAAQ,gBAAkB,yB,mYC3BnC,IAAMI,EAAWd,IAAOe,GAAV,KAKRC,EAAqBhB,IAAOiB,IAAV,KAIlBC,EAAelB,IAAOmB,GAAV,KAKZC,EAAapB,IAAOiB,IAAV,KAiBDI,EAfMhB,IAAMC,MACzB,gBAAGgB,EAAH,EAAGA,cAAeC,EAAlB,EAAkBA,gBAAiBC,EAAnC,EAAmCA,WAAYC,EAA/C,EAA+CA,aAAcC,EAA7D,EAA6DA,SAA7D,OACE,eAACV,EAAD,WACE,eAACF,EAAD,0BAAuBY,EAAW,KAAMC,QAAQ,GAAhD,OACA,eAACb,EAAD,WACGS,EADH,OACwBD,KAExB,cAACJ,EAAD,mBACA,eAACE,EAAD,WACGK,EADH,OACqBD,W,4NCzB3B,IAAMI,EAAY5B,IAAOiB,IAAV,KAcAY,EAJM,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACtB,OAAO,cAACF,EAAD,UAAYE,K,2UCZN9B,UAAO+B,OAAtB,K,2UCAe/B,UAAOgC,MAAtB,K,koBCKA,IAAMC,EAAKjC,IAAOkC,GAAV,KAMFC,EAAKnC,IAAOoC,GAAV,KASF,SAACC,GAAD,OAAWA,EAAMC,SAAW,uCAqFnBC,EA5DGlC,IAAMC,MACtB,YAA2D,IAAxDkC,EAAuD,EAAvDA,YAAaV,EAA0C,EAA1CA,SAAUW,EAAgC,EAAhCA,WAAYnB,EAAoB,EAApBA,cAC9BoB,EAAM1D,uBAAY,kBAAMwD,EAAY,CAAEzE,KAAM,UAAU,CAACyE,IAEvDG,EAAS3D,uBACb,SAACrB,GAAD,OAAS,kBAAM6E,EAAY,CAAEzE,KAAM,SAAUJ,WAC7C,CAAC6E,IAGGI,EAAO5D,uBACX,SAACrB,GAAD,OAAS,SAACkF,GAAD,OACPL,EAAY,CACVzE,KAAM,OACNJ,MACAC,MAAOiF,EAAMC,OAAOxF,KACpBO,MAAOgF,EAAMC,OAAOjF,WAExB,CAAC2E,IAGGO,EAAc/D,uBAClB,SAACrB,GAAD,OAAS,SAACkF,GAAD,OACPL,EAAY,CAAEzE,KAAM,OAAQJ,MAAKG,GAAIE,SAAS6E,EAAMC,OAAOjF,YAC7D,CAAC2E,IAGH,OACE,eAACP,EAAD,WACE,cAACE,EAAD,UACE,cAACvB,EAAD,CAAQC,QAAS6B,EAAjB,0BAEDZ,EAASkB,KAAI,SAACtD,EAAGvC,GAAJ,OACZ,eAACgF,EAAD,CAAYG,QAAShB,IAAkBnE,EAAvC,UACE,cAACyD,EAAD,CAAQqC,UAAU,OAAOpC,QAAS8B,EAAOxF,GAAzC,eAGA,cAAC+F,EAAD,CAAQD,UAAU,OAAOpF,MAAOV,EAAGgG,SAAUJ,EAAY5F,GAAzD,SACG2E,EAASkB,KAAI,SAACI,EAAGzF,GAAJ,OACZ,wBAAkBE,MAAOF,EAAzB,SACGA,EAAM,GADIA,QAKjB,cAAC0F,EAAD,CACEtF,KAAK,SACLT,KAAK,WACLgG,QAASV,EAAKzF,GACdU,MAAO6B,EAAErC,WAEX,cAACgG,EAAD,CAAOtF,KAAK,OAAOT,KAAK,OAAOgG,QAASV,EAAKzF,GAAIU,MAAO6B,EAAEpC,OAC1D,cAACsD,EAAD,CAAQqC,UAAU,OAAOpC,QAAS,kBAAM4B,EAAWtF,IAAnD,oBAlBOA,Y,8SC5EnB,IAAMyE,EAAY5B,IAAOiB,IAAV,KAGTgB,EAAKjC,IAAOkC,GAAV,KAIFqB,EAAOvD,IAAOwD,EAAV,KAKKnD,OAAMC,MAAK,YAAsB,IAAnBzB,EAAkB,EAAlBA,YACrB4E,EAAcvE,OAAOC,SAASuE,KAAKC,YAAYzE,OAAOC,SAASF,MAE/D2E,EADY1E,OAAOC,SAASuE,KAAKnG,MAAM,EAAGkG,GACxB,IAAM5E,EAE9B,OACE,eAAC,EAAD,WACE,+CACA,eAAC,EAAD,WACE,0DACA,wEACA,wGAGA,qDACsB,IACpB,cAAC0E,EAAD,CAAMG,KAAME,EAAKd,OAAO,SAASe,IAAI,sBAArC,SACGD,gB,4KCPb,IAAME,GAAY9D,IAAOiB,IAAV,MAQT1C,GAAe,CACnB,CAAEjB,KAAM,oBAAqBD,SAAU,GACvC,CAAEC,KAAM,OAAQD,SAAU,KAC1B,CAAEC,KAAM,qBAAsBD,SAAU,GACxC,CAAEC,KAAM,QAASD,SAAU,MA4Gd0G,GAtGH,WAAO,IAAD,EVvCM,WAAO,IAAD,EACJvF,mBAAS3B,GADL,mBACrBmH,EADqB,KACfC,EADe,KAgB5B,OAXAnE,qBAAU,WAMSoE,aAAY,WAC3BD,GAAQ,SAACD,GAAD,MAAU,sBAAIA,GAAJ,CAAUlH,KAAKC,QAAOQ,OAAO,QAC9C,OACF,IAEIyG,EUwByBG,GADhB,mBACTC,EADS,KACCC,EADD,OXvCM,WAAM,MAEE7F,mBAAS,IAFX,mBAErB8F,EAFqB,KAEZC,EAFY,OAGE/F,oBAAS,GAHX,mBAGrBgG,EAHqB,KAGZC,EAHY,OAIFjG,mBAAS,MAJP,mBAIrBC,EAJqB,KAIdC,EAJc,KAKtBgG,EAAOJ,EAAQlH,OAIrB0C,qBAAU,WACRyE,EAAW3H,EAAKoG,KAAI,SAACtD,GAAD,OAAO,IAAIiF,MAAMjF,SACpC,IAEH,IAAMkF,EAAc5F,uBAAY,WAC9ByF,GAAW,SAACD,GAEV,OADIA,GAAS9F,EAAS,OACd8F,OAET,IAEGK,EAAY7F,sBAAW,uCAC3B,WAAOrB,GAAP,SAAA6F,EAAA,2DACMgB,GAAWE,EAAO,GADxB,oBAEI/G,GAAO+G,EAAO/G,GAAO2G,EAAQlH,SAEzBkH,EAAQ3G,GAAKmH,YAAcC,iBAAiBC,mBAJpD,oBAK0B,MAAhBV,EAAQ3G,GALlB,uBAMQe,EAAS,WAAD,OAAYf,EAAZ,cANhB,iCASM2G,EAAQ3G,GAAK0G,YAAc,EATjC,mBAWcC,EAAQ3G,GAAKsH,OAX3B,0DAaQvG,EAAS,WAAD,OAAYf,EAAZ,sBAbhB,0DAD2B,sDAmB3B,CAAC2G,EAASI,EAAMF,IAGlB,MAAO,CAAE9D,MAAO8D,EAASI,cAAaC,YAAWK,WAAYzG,GWDnB0G,GAAlCzE,EAFQ,EAERA,MAAOkE,EAFC,EAEDA,YAAaC,EAFZ,EAEYA,UAFZ,EAMgCvG,EAASC,IAAjDtB,EANQ,EAMRA,MAAO2B,EANC,EAMDA,SAAUH,EANT,EAMSA,MAAOI,EANhB,EAMgBA,YANhB,EAagBL,mBAAS,GAbzB,mBAaT4G,EAbS,KAaCC,EAbD,OAcc7G,oBAAS,GAdvB,mBAcT+B,EAdS,KAcA+E,EAdA,OAegB9G,mBAA6B,IAApBvB,EAAM,GAAGI,UAflC,mBAeTqE,EAfS,KAeC6D,EAfD,OAiBsB/G,mBAAS,IAjB/B,mBAiBTgH,EAjBS,KAiBIC,EAjBJ,KAmBVC,GAAgBN,EAAW,GAAKnI,EAAMG,OAE5C0C,qBAAU,WACJS,GACFgF,GAAY,SAAC7D,GAEX,IAAMiE,EAAOjE,GAAY2C,EAAcD,GACvC,OAAIuB,EAAO,EAAUA,GAEnBd,EAAUa,GACVL,EAAYK,GACZD,EAAe,eAAKxI,EAAMyI,KACY,IAA/BzI,EAAMyI,GAAcrI,SAAkBsI,QAKlD,CAACd,EAAWO,EAAUnI,EAAOsD,EAAS8D,EAAaD,EAAUsB,IAEhE5F,qBAAU,WACR,IAAKS,EAAS,CACZ,IAAMqF,EAAcR,EAAWnI,EAAMG,OAASgI,EAAW,EACzDK,EAAe,eAAKxI,EAAM2I,KAC1BL,EAA0C,IAA9BtI,EAAM2I,GAAavI,UAC/BgI,EAAYO,MAEb,CAAC3I,EAAOsD,EAAS6E,IAEpB,IAAM5E,EAAYqF,mBAAQ,WACxB,OAAO,WACLP,GAAW,SAAC/E,GAEV,OADKA,GAASsE,EAAUO,IAChB7E,QAGX,CAAC6E,EAAUP,IAERpE,EAAUzB,uBAAY,WAC1BsG,GAAW,GACXD,EAAY,GACZE,EAAgC,IAApBtI,EAAM,GAAGI,YACpB,CAACJ,IAEEwF,EAAazD,uBACjB,SAAC7B,GACCmI,GAAW,GACXG,EAAe,eAAKxI,EAAME,KAC1BoI,EAAgC,IAApBtI,EAAME,GAAGE,UACrBgI,EAAYlI,KAEd,CAACF,IAGH,OACE,eAAC6G,GAAD,WACGrF,GAAS,cAAC,EAAD,UAAeA,IACzB,cAACqH,GAAD,CAAajH,YAAaA,IAC1B,cAAC,EAAD,CACE2B,UAAWA,EACXD,QAASA,EACTE,QAASA,EACTC,MAAOA,EACPC,QAASiE,IAGX,cAAC,EAAD,CACElD,SAAUA,EACVJ,cAAekE,EAAYlI,KAC3BiE,gBAAiBiE,EAAYnI,SAC7BmE,WAAYvE,EAAMyI,GAAcpI,KAChCmE,aAAcxE,EAAMyI,GAAcrI,WAEpC,cAAC,EAAD,CACEmF,YAAa5D,EACb6D,WAAYA,EACZnB,cAAe8D,EAHjB,SAKGnI,QC/HM8I,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAG1BD,SAAS5G,iBAAiB,SAAS,SAACL,GAEA,WAAhCiH,SAASE,cAAc9I,MACvB4I,SAASE,cAAcC,UAAUC,SAAS,aAE1CJ,SAASE,cAAcG,UAO3BjB,O","file":"static/js/main.06e3c619.chunk.js","sourcesContent":["import { useState, useCallback, useEffect } from 'react'\r\n\r\nconst urls = ['audio/time-is-now.mp3', 'audio/point-blank.mp3']\r\n\r\nexport const useAudio = () => {\r\n  // const [loading, setLoading] = useState(true)\r\n  const [audioEl, setAudioEl] = useState([])\r\n  const [working, setWorking] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const size = audioEl.length\r\n\r\n  // console.log('audio', working)\r\n\r\n  useEffect(() => {\r\n    setAudioEl(urls.map((e) => new Audio(e)))\r\n  }, [])\r\n\r\n  const switchAudio = useCallback(() => {\r\n    setWorking((working) => {\r\n      if (working) setError(null)\r\n      return !working\r\n    })\r\n  }, [])\r\n\r\n  const playAudio = useCallback(\r\n    async (idx) => {\r\n      if (working && size > 0) {\r\n        idx = (size + idx) % audioEl.length\r\n\r\n        if (audioEl[idx].readyState >= HTMLMediaElement.HAVE_CURRENT_DATA) {\r\n          if (audioEl[idx] == null) {\r\n            setError(`audioEl[${idx}] is null`)\r\n            return\r\n          }\r\n          audioEl[idx].currentTime = 0\r\n          try {\r\n            await audioEl[idx].play()\r\n          } catch (e) {\r\n            setError(`audioEl[${idx}] : ${e}`)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    [audioEl, size, working]\r\n  )\r\n\r\n  return { audio: working, switchAudio, playAudio, audioError: error }\r\n}\r\n","import { useEffect, useState, useCallback, useReducer } from 'react'\r\n\r\nconst defaultTime = [Date.now(), Date.now()]\r\n\r\nexport const useTimer = () => {\r\n  const [time, setTime] = useState(defaultTime)\r\n\r\n  // console.log(time[1] - time[0])\r\n\r\n  useEffect(() => {\r\n    // const timer = setTime(() => {\r\n    //   setTime((time) => [...time, Date.now()].slice(-2))\r\n    // }, 150)\r\n    // return () => clearTimeout(timer)\r\n    // console.log('setup timer effect')\r\n    const interval = setInterval(() => {\r\n      setTime((time) => [...time, Date.now()].slice(-2))\r\n    }, 500)\r\n  }, [])\r\n\r\n  return time\r\n}\r\n","import { useState, useEffect, useCallback, useReducer } from 'react'\r\n\r\nconst tryParse = (str) => {\r\n  let tokens = str.split(',')\r\n\r\n  if (tokens[tokens.length - 1] === '') {\r\n    tokens = tokens.slice(0, -1)\r\n  }\r\n\r\n  const result = []\r\n\r\n  for (let i = 0; i < tokens.length; i++) {\r\n    const num = parseFloat(tokens[i])\r\n    if (!(isFinite(num) && num >= 0)) {\r\n      return [`${i} item, expected finite >= 0 float, got ${tokens[i]}`]\r\n    }\r\n\r\n    let name = ''\r\n\r\n    if (++i < tokens.length) {\r\n      try {\r\n        name = decodeURIComponent(tokens[i])\r\n      } catch (e) {\r\n        return [`${i} item, decodeURIComponent error ${e}, got ${tokens[i]}`]\r\n      }\r\n    }\r\n\r\n    result.push({\r\n      duration: num,\r\n      name: name,\r\n    })\r\n  }\r\n\r\n  return [null, result]\r\n}\r\n\r\nconst stringify = (table) => {\r\n  let str = ''\r\n  for (let i = 0; i < table.length; i++) {\r\n    str += table[i].duration + ',' + table[i].name + ','\r\n  }\r\n\r\n  if (str.slice(-2) === ',,') str = str.slice(0, -1)\r\n  return str\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  let { idx, field, value, to } = action\r\n  switch (action.type) {\r\n    case 'add':\r\n      return [...state, { name: 'new action', duration: 60 }]\r\n\r\n    case 'remove':\r\n      // let { idx } = action\r\n      if (state.length === 1) return state\r\n      return [...state.slice(0, idx), ...state.slice(idx + 1)]\r\n\r\n    case 'edit':\r\n      // let { idx, field, value } = action\r\n      if (field === 'duration') {\r\n        if (value === '') value = 0\r\n        value = parseInt(value)\r\n        if (isNaN(value)) return state\r\n        if (value < 0) return state\r\n      }\r\n      return [\r\n        ...state.slice(0, idx),\r\n        { ...state[idx], [field]: value },\r\n        ...state.slice(idx + 1),\r\n      ]\r\n\r\n    case 'move':\r\n      const min = Math.min(idx, to)\r\n      const max = Math.max(idx, to)\r\n      // console.log('move', min, max)\r\n      if (min === max) return state\r\n      const result = state.slice()\r\n      result[idx] = state[to]\r\n      result[to] = state[idx]\r\n      return result\r\n\r\n    case 'set':\r\n      return value\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst useTable = (defaultTable) => {\r\n  const [error, setError] = useState(null)\r\n  const [table, setTable] = useReducer(reducer, defaultTable)\r\n  const [tableString, setLink] = useState(() => stringify(defaultTable))\r\n\r\n  const loadHash = useCallback(() => {\r\n    let hash = window.location.hash\r\n    if (hash[0] === '#') hash = hash.slice(1)\r\n    if (hash.length === 0) return\r\n\r\n    const [err, result] = tryParse(hash)\r\n    if (err) return setError(err)\r\n\r\n    setError(null)\r\n    setTable({ type: 'set', value: result })\r\n    setLink(stringify(result))\r\n  }, [])\r\n\r\n  // listen for changes but not change\r\n  useEffect(() => {\r\n    if (window.location.hash.length > 2) {\r\n      loadHash()\r\n    }\r\n    window.addEventListener('hashchange', () => {\r\n      loadHash()\r\n    })\r\n  }, [loadHash])\r\n\r\n  useEffect(() => {\r\n    setLink(stringify(table))\r\n  }, [table])\r\n\r\n  return { table, setTable, error, tableString }\r\n}\r\n\r\nexport default useTable\r\n","import styled from 'styled-components'\r\n\r\nexport default styled.button`\r\n  display: inline-block;\r\n  background-color: #000;\r\n  margin: 3px;\r\n  border: 1px solid #eee;\r\n  color: #eee;\r\n  font-size: 2rem;\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n\r\n  &:focus {\r\n    outline: 3px solid #eee;\r\n  }\r\n\r\n  @media (min-width: 600px) {\r\n    font-size: 1rem;\r\n  }\r\n`\r\n","import React from 'react'\r\n\r\nimport styled from 'styled-components'\r\nimport Button from '../styled/Button'\r\n\r\nconst ButtonRow = styled.nav`\r\n  display: flex;\r\n  align-items: baseline;\r\n  & > * {\r\n    flex-basis: 150px;\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    & > * {\r\n      font-size: 1em;\r\n      flex-grow: 1;\r\n      flex-basis: 0;\r\n    }\r\n  }\r\n`\r\n\r\nconst Header = React.memo(({ running, onRunning, onReset, audio, onAudio }) => (\r\n  <header>\r\n    <h1>\r\n      Timeboxing timer <span>- {running ? 'running' : 'stopped'}</span>\r\n    </h1>\r\n    <ButtonRow>\r\n      <Button onClick={onRunning}>{running ? 'stop' : 'run'}</Button>\r\n      <Button onClick={onReset}>reset timer</Button>\r\n      <Button onClick={onAudio}>\r\n        {audio ? 'audio playing' : 'audio muted'}\r\n      </Button>\r\n    </ButtonRow>\r\n  </header>\r\n))\r\nexport default Header\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst MainInfo = styled.h1`\r\n  font-family: monospace;\r\n  margin: 0;\r\n`\r\n\r\nconst StyledActionStatus = styled.div`\r\n  margin: 20px 0;\r\n`\r\n\r\nconst SecondHeader = styled.h2`\r\n  margin: 20px 0 0 0;\r\n  font-size: 1.2rem;\r\n`\r\n\r\nconst SecondText = styled.div``\r\n\r\nconst ActionStatus = React.memo(\r\n  ({ currentAction, currentDuration, nextAction, nextDuration, restTime }) => (\r\n    <StyledActionStatus>\r\n      <MainInfo>rest time: {(restTime / 1000).toFixed(0)}s</MainInfo>\r\n      <MainInfo>\r\n        {currentDuration}s - {currentAction}\r\n      </MainInfo>\r\n      <SecondHeader>next</SecondHeader>\r\n      <SecondText>\r\n        {nextDuration}s - {nextAction}\r\n      </SecondText>\r\n    </StyledActionStatus>\r\n  )\r\n)\r\n\r\nexport default ActionStatus\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  box-sizing: border-box;\r\n  width: 100%;\r\n  background-color: #d83c3499;\r\n\r\n  border: 2px solid #fff4;\r\n  padding: 10px 5px;\r\n  font-size: 1.1rem;\r\n`\r\n\r\nconst ErrorMessage = ({ children }) => {\r\n  return <Container>{children}</Container>\r\n}\r\n\r\nexport default ErrorMessage\r\n","import styled from 'styled-components'\r\n\r\nexport default styled.select`\r\n  background-color: #000;\r\n  margin: 3px;\r\n  border: 1px solid #eee;\r\n  color: #eee;\r\n  font-size: 2rem;\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n\r\n  &:focus {\r\n    outline: 3px solid #eee;\r\n  }\r\n\r\n  @media (min-width: 600px) {\r\n    font-size: 1rem;\r\n  }\r\n`\r\n","import styled from 'styled-components'\r\n\r\nexport default styled.input`\r\n  background-color: #000;\r\n  margin: 3px;\r\n  color: #eee;\r\n  border: 1px solid #eee;\r\n  font-size: 2rem;\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n\r\n  &:focus {\r\n    outline: 3px solid #eee;\r\n  }\r\n\r\n  @media (min-width: 600px) {\r\n    font-size: 1rem;\r\n  }\r\n`\r\n","import React, { useCallback } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport Button from '../styled/Button'\r\nimport Select from '../styled/Select'\r\nimport Input from '../styled/Input'\r\n\r\nconst Ul = styled.ul`\r\n  list-style-type: none;\r\n  padding: 0;\r\n  margin: 0;\r\n`\r\n\r\nconst Li = styled.li`\r\n  &:nth-child(even) {\r\n    background: #222;\r\n  }\r\n\r\n  & {\r\n    padding: 5px;\r\n    box-sizing: border-box;\r\n\r\n    ${(props) => props.current && 'background-color: #666 !important'}\r\n  }\r\n\r\n  @media (max-width: 600px) {\r\n    & {\r\n      display: flex;\r\n      flex-wrap: wrap;\r\n      width: 100%;\r\n      padding: 10px;\r\n    }\r\n\r\n    & > input {\r\n      order: -1;\r\n      width: 100%;\r\n      flex-basis: 100%;\r\n      flex-grow: 1;\r\n    }\r\n\r\n    & > .item {\r\n      flex-grow: 1;\r\n      flex-basis: 0;\r\n    }\r\n  }\r\n`\r\n\r\nconst InputArea = React.memo(\r\n  ({ changeTable, children, gotoAction, currentAction }) => {\r\n    const add = useCallback(() => changeTable({ type: 'add' }), [changeTable])\r\n\r\n    const remove = useCallback(\r\n      (idx) => () => changeTable({ type: 'remove', idx }),\r\n      [changeTable]\r\n    )\r\n\r\n    const edit = useCallback(\r\n      (idx) => (event) =>\r\n        changeTable({\r\n          type: 'edit',\r\n          idx,\r\n          field: event.target.name,\r\n          value: event.target.value,\r\n        }),\r\n      [changeTable]\r\n    )\r\n\r\n    const changeIndex = useCallback(\r\n      (idx) => (event) =>\r\n        changeTable({ type: 'move', idx, to: parseInt(event.target.value) }),\r\n      [changeTable]\r\n    )\r\n\r\n    return (\r\n      <Ul>\r\n        <Li>\r\n          <Button onClick={add}>add action</Button>\r\n        </Li>\r\n        {children.map((e, i) => (\r\n          <Li key={i} current={currentAction === i}>\r\n            <Button className=\"item\" onClick={remove(i)}>\r\n              -\r\n            </Button>\r\n            <Select className=\"item\" value={i} onChange={changeIndex(i)}>\r\n              {children.map((_, idx) => (\r\n                <option key={idx} value={idx}>\r\n                  {idx + 1}\r\n                </option>\r\n              ))}\r\n            </Select>\r\n            <Input\r\n              type=\"number\"\r\n              name=\"duration\"\r\n              onInput={edit(i)}\r\n              value={e.duration}\r\n            />\r\n            <Input type=\"text\" name=\"name\" onInput={edit(i)} value={e.name} />\r\n            <Button className=\"item\" onClick={() => gotoAction(i)}>\r\n              goto\r\n            </Button>\r\n          </Li>\r\n        ))}\r\n      </Ul>\r\n    )\r\n  }\r\n)\r\n\r\nexport default InputArea\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Container = styled.div`\r\n  white-space: no;\r\n`\r\nconst Ul = styled.ul`\r\n  padding: 0 20px 0 25px;\r\n`\r\n\r\nconst Link = styled.a`\r\n  color: #eee;\r\n  word-break: break-all;\r\n`\r\n\r\nexport default React.memo(({ tableString }) => {\r\n  const hashSection = window.location.href.lastIndexOf(window.location.hash)\r\n  const prefixUrl = window.location.href.slice(0, hashSection)\r\n  const url = prefixUrl + '#' + tableString\r\n\r\n  return (\r\n    <Container>\r\n      <h2>How to use it</h2>\r\n      <Ul>\r\n        <li>Audio - by default muted</li>\r\n        <li>run/stop button - resets timer on stop</li>\r\n        <li>\r\n          you can save your schedule as link - all information are stored in URL\r\n        </li>\r\n        <li>\r\n          current share link:{' '}\r\n          <Link href={url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n            {url}\r\n          </Link>\r\n        </li>\r\n      </Ul>\r\n    </Container>\r\n  )\r\n})\r\n","import React, { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useAudio } from './hooks/audio'\nimport { useTimer } from './hooks/timer'\nimport useTable from './hooks/table'\n\nimport styled from 'styled-components'\n\nimport Header from './components/Header'\nimport ActionStatus from './components/ActionStatus'\nimport ErrorMessage from './components/ErrorMessage'\nimport InputArea from './components/InputArea'\nimport HelpMessage from './components/HelpMessage'\n\n// const useTable = (value) => {\n//   const [state, dispatch] = useReducer(reducer, { table: value })\n\n//   const reducer = (state, action) => {\n//     switch (action.type) {\n//       case 'timing'\n//       default:\n//         console.log('hello')\n//     }\n//   }\n// }\n\nconst StyledApp = styled.div`\n  background: #000;\n  color: #eee;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n`\n\nconst defaultTable = [\n  { name: 'switching to anki', duration: 5 },\n  { name: 'anki', duration: 300 },\n  { name: 'switching to anime', duration: 5 },\n  { name: 'anime', duration: 300 },\n]\n\n// let t = null\n// const textareaString = tableToString(defaultTable)\n\nconst App = () => {\n  const [prevTime, currentTime] = useTimer()\n  const { audio, switchAudio, playAudio } = useAudio()\n  // console.log(currentTime, prevTime)\n  // const diff = currentTime - prevTime\n\n  const { table, setTable, error, tableString } = useTable(defaultTable)\n\n  // if (!Object.is(t, table)) {\n  //   console.log('table has changed', t, table)\n  // }\n  // t = table\n\n  const [position, setPosition] = useState(0)\n  const [running, setRunning] = useState(false)\n  const [restTime, setRestTime] = useState(table[0].duration * 1000)\n\n  const [savedAction, setSavedAction] = useState({})\n\n  const nextPosition = (position + 1) % table.length\n  // const [oldTime, setOldTime] = useState(0)\n  useEffect(() => {\n    if (running) {\n      setRestTime((restTime) => {\n        // if (running) {\n        const diff = restTime - (currentTime - prevTime)\n        if (diff > 0) return diff\n        else {\n          playAudio(nextPosition)\n          setPosition(nextPosition)\n          setSavedAction({ ...table[nextPosition] })\n          return table[nextPosition].duration * 1000 + diff\n        }\n        // }\n      })\n    }\n  }, [playAudio, position, table, running, currentTime, prevTime, nextPosition])\n\n  useEffect(() => {\n    if (!running) {\n      const newPosition = position < table.length ? position : 0\n      setSavedAction({ ...table[newPosition] })\n      setRestTime(table[newPosition].duration * 1000)\n      setPosition(newPosition)\n    }\n  }, [table, running, position])\n\n  const onRunning = useMemo(() => {\n    return () => {\n      setRunning((running) => {\n        if (!running) playAudio(position)\n        return !running\n      })\n    }\n  }, [position, playAudio])\n\n  const onReset = useCallback(() => {\n    setRunning(false)\n    setPosition(0)\n    setRestTime(table[0].duration * 1000)\n  }, [table])\n\n  const gotoAction = useCallback(\n    (i) => {\n      setRunning(false)\n      setSavedAction({ ...table[i] })\n      setRestTime(table[i].duration * 1000)\n      setPosition(i)\n    },\n    [table]\n  )\n\n  return (\n    <StyledApp>\n      {error && <ErrorMessage>{error}</ErrorMessage>}\n      <HelpMessage tableString={tableString} />\n      <Header\n        onRunning={onRunning}\n        running={running}\n        onReset={onReset}\n        audio={audio}\n        onAudio={switchAudio}\n        // {...{ onRunning, running, onReset, audio, onAudio: switchAudio }}\n      />\n      <ActionStatus\n        restTime={restTime}\n        currentAction={savedAction.name}\n        currentDuration={savedAction.duration}\n        nextAction={table[nextPosition].name}\n        nextDuration={table[nextPosition].duration}\n      />\n      <InputArea\n        changeTable={setTable}\n        gotoAction={gotoAction}\n        currentAction={position}\n      >\n        {table}\n      </InputArea>\n    </StyledApp>\n  )\n}\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\ndocument.addEventListener('wheel', (e) => {\n  if (\n    document.activeElement.type === 'number' &&\n    document.activeElement.classList.contains('noscroll')\n  ) {\n    document.activeElement.blur()\n  }\n})\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}