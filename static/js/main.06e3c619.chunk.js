(this["webpackJsonpboxing-timer"]=this["webpackJsonpboxing-timer"]||[]).push([[0],{25:function(n,e,t){},29:function(n,e,t){"use strict";t.r(e);var r=t(1),i=t(0),c=t.n(i),a=t(15),o=t.n(a),u=(t(25),t(6)),l=t(4),s=t(2),d=t(12),b=t.n(d),f=t(16),j=["audio/time-is-now.mp3","audio/point-blank.mp3"],x=t(5),O=[Date.now(),Date.now()],m=t(8),p=function(n){for(var e="",t=0;t<n.length;t++)e+=n[t].duration+","+n[t].name+",";return",,"===e.slice(-2)&&(e=e.slice(0,-1)),e},h=function(n,e){var t=e.idx,r=e.field,i=e.value,c=e.to;switch(e.type){case"add":return[].concat(Object(x.a)(n),[{name:"new action",duration:60}]);case"remove":return 1===n.length?n:[].concat(Object(x.a)(n.slice(0,t)),Object(x.a)(n.slice(t+1)));case"edit":if("duration"===r){if(""===i&&(i=0),i=parseInt(i),isNaN(i))return n;if(i<0)return n}return[].concat(Object(x.a)(n.slice(0,t)),[Object(u.a)(Object(u.a)({},n[t]),{},Object(m.a)({},r,i))],Object(x.a)(n.slice(t+1)));case"move":if(Math.min(t,c)===Math.max(t,c))return n;var a=n.slice();return a[t]=n[c],a[c]=n[t],a;case"set":return i;default:return n}},v=function(n){var e=Object(i.useState)(null),t=Object(l.a)(e,2),r=t[0],c=t[1],a=Object(i.useReducer)(h,n),o=Object(l.a)(a,2),u=o[0],s=o[1],d=Object(i.useState)((function(){return p(n)})),b=Object(l.a)(d,2),f=b[0],j=b[1],x=Object(i.useCallback)((function(){var n=window.location.hash;if("#"===n[0]&&(n=n.slice(1)),0!==n.length){var e=function(n){var e=n.split(",");""===e[e.length-1]&&(e=e.slice(0,-1));for(var t=[],r=0;r<e.length;r++){var i=parseFloat(e[r]);if(!(isFinite(i)&&i>=0))return["".concat(r," item, expected finite >= 0 float, got ").concat(e[r])];var c="";if(++r<e.length)try{c=decodeURIComponent(e[r])}catch(a){return["".concat(r," item, decodeURIComponent error ").concat(a,", got ").concat(e[r])]}t.push({duration:i,name:c})}return[null,t]}(n),t=Object(l.a)(e,2),r=t[0],i=t[1];if(r)return c(r);c(null),s({type:"set",value:i}),j(p(i))}}),[]);return Object(i.useEffect)((function(){window.location.hash.length>2&&x(),window.addEventListener("hashchange",(function(){x()}))}),[x]),Object(i.useEffect)((function(){j(p(u))}),[u]),{table:u,setTable:s,error:r,tableString:f}},g=t(3);function w(){var n=Object(s.a)(["\n  display: inline-block;\n  background-color: #000;\n  margin: 3px;\n  border: 1px solid #eee;\n  color: #eee;\n  font-size: 2rem;\n  box-sizing: border-box;\n  padding: 5px;\n\n  &:focus {\n    outline: 3px solid #eee;\n  }\n\n  @media (min-width: 600px) {\n    font-size: 1rem;\n  }\n"]);return w=function(){return n},n}var k=g.a.button(w());function y(){var n=Object(s.a)(["\n  display: flex;\n  align-items: baseline;\n  & > * {\n    flex-basis: 150px;\n  }\n\n  @media (max-width: 600px) {\n    & > * {\n      font-size: 1em;\n      flex-grow: 1;\n      flex-basis: 0;\n    }\n  }\n"]);return y=function(){return n},n}var C=g.a.nav(y()),A=c.a.memo((function(n){var e=n.running,t=n.onRunning,i=n.onReset,c=n.audio,a=n.onAudio;return Object(r.jsxs)("header",{children:[Object(r.jsxs)("h1",{children:["Timeboxing timer ",Object(r.jsxs)("span",{children:["- ",e?"running":"stopped"]})]}),Object(r.jsxs)(C,{children:[Object(r.jsx)(k,{onClick:t,children:e?"stop":"run"}),Object(r.jsx)(k,{onClick:i,children:"reset timer"}),Object(r.jsx)(k,{onClick:a,children:c?"audio playing":"audio muted"})]})]})}));function E(){var n=Object(s.a)([""]);return E=function(){return n},n}function S(){var n=Object(s.a)(["\n  margin: 20px 0 0 0;\n  font-size: 1.2rem;\n"]);return S=function(){return n},n}function z(){var n=Object(s.a)(["\n  margin: 20px 0;\n"]);return z=function(){return n},n}function T(){var n=Object(s.a)(["\n  font-family: monospace;\n  margin: 0;\n"]);return T=function(){return n},n}var I=g.a.h1(T()),R=g.a.div(z()),D=g.a.h2(S()),F=g.a.div(E()),L=c.a.memo((function(n){var e=n.currentAction,t=n.currentDuration,i=n.nextAction,c=n.nextDuration,a=n.restTime;return Object(r.jsxs)(R,{children:[Object(r.jsxs)(I,{children:["rest time: ",(a/1e3).toFixed(0),"s"]}),Object(r.jsxs)(I,{children:[t,"s - ",e]}),Object(r.jsx)(D,{children:"next"}),Object(r.jsxs)(F,{children:[c,"s - ",i]})]})}));function M(){var n=Object(s.a)(["\n  box-sizing: border-box;\n  width: 100%;\n  background-color: #d83c3499;\n\n  border: 2px solid #fff4;\n  padding: 10px 5px;\n  font-size: 1.1rem;\n"]);return M=function(){return n},n}var N=g.a.div(M()),U=function(n){var e=n.children;return Object(r.jsx)(N,{children:e})};function H(){var n=Object(s.a)(["\n  background-color: #000;\n  margin: 3px;\n  border: 1px solid #eee;\n  color: #eee;\n  font-size: 2rem;\n  box-sizing: border-box;\n  padding: 5px;\n\n  &:focus {\n    outline: 3px solid #eee;\n  }\n\n  @media (min-width: 600px) {\n    font-size: 1rem;\n  }\n"]);return H=function(){return n},n}var _=g.a.select(H());function B(){var n=Object(s.a)(["\n  background-color: #000;\n  margin: 3px;\n  color: #eee;\n  border: 1px solid #eee;\n  font-size: 2rem;\n  box-sizing: border-box;\n  padding: 5px;\n\n  &:focus {\n    outline: 3px solid #eee;\n  }\n\n  @media (min-width: 600px) {\n    font-size: 1rem;\n  }\n"]);return B=function(){return n},n}var J=g.a.input(B());function P(){var n=Object(s.a)(["\n  &:nth-child(even) {\n    background: #222;\n  }\n\n  & {\n    padding: 5px;\n    box-sizing: border-box;\n\n    ","\n  }\n\n  @media (max-width: 600px) {\n    & {\n      display: flex;\n      flex-wrap: wrap;\n      width: 100%;\n      padding: 10px;\n    }\n\n    & > input {\n      order: -1;\n      width: 100%;\n      flex-basis: 100%;\n      flex-grow: 1;\n    }\n\n    & > .item {\n      flex-grow: 1;\n      flex-basis: 0;\n    }\n  }\n"]);return P=function(){return n},n}function V(){var n=Object(s.a)(["\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n"]);return V=function(){return n},n}var q=g.a.ul(V()),G=g.a.li(P(),(function(n){return n.current&&"background-color: #666 !important"})),K=c.a.memo((function(n){var e=n.changeTable,t=n.children,c=n.gotoAction,a=n.currentAction,o=Object(i.useCallback)((function(){return e({type:"add"})}),[e]),u=Object(i.useCallback)((function(n){return function(){return e({type:"remove",idx:n})}}),[e]),l=Object(i.useCallback)((function(n){return function(t){return e({type:"edit",idx:n,field:t.target.name,value:t.target.value})}}),[e]),s=Object(i.useCallback)((function(n){return function(t){return e({type:"move",idx:n,to:parseInt(t.target.value)})}}),[e]);return Object(r.jsxs)(q,{children:[Object(r.jsx)(G,{children:Object(r.jsx)(k,{onClick:o,children:"add action"})}),t.map((function(n,e){return Object(r.jsxs)(G,{current:a===e,children:[Object(r.jsx)(k,{className:"item",onClick:u(e),children:"-"}),Object(r.jsx)(_,{className:"item",value:e,onChange:s(e),children:t.map((function(n,e){return Object(r.jsx)("option",{value:e,children:e+1},e)}))}),Object(r.jsx)(J,{type:"number",name:"duration",onInput:l(e),value:n.duration}),Object(r.jsx)(J,{type:"text",name:"name",onInput:l(e),value:n.name}),Object(r.jsx)(k,{className:"item",onClick:function(){return c(e)},children:"goto"})]},e)}))]})}));function Q(){var n=Object(s.a)(["\n  color: #eee;\n  word-break: break-all;\n"]);return Q=function(){return n},n}function W(){var n=Object(s.a)(["\n  padding: 0 20px 0 25px;\n"]);return W=function(){return n},n}function X(){var n=Object(s.a)(["\n  white-space: no;\n"]);return X=function(){return n},n}var Y=g.a.div(X()),Z=g.a.ul(W()),$=g.a.a(Q()),nn=c.a.memo((function(n){var e=n.tableString,t=window.location.href.lastIndexOf(window.location.hash),i=window.location.href.slice(0,t)+"#"+e;return Object(r.jsxs)(Y,{children:[Object(r.jsx)("h2",{children:"How to use it"}),Object(r.jsxs)(Z,{children:[Object(r.jsx)("li",{children:"Audio - by default muted"}),Object(r.jsx)("li",{children:"run/stop button - resets timer on stop"}),Object(r.jsx)("li",{children:"you can save your schedule as link - all information are stored in URL"}),Object(r.jsxs)("li",{children:["current share link:"," ",Object(r.jsx)($,{href:i,target:"_blank",rel:"noopener noreferrer",children:i})]})]})]})}));function en(){var n=Object(s.a)(["\n  background: #000;\n  color: #eee;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n"]);return en=function(){return n},n}var tn=g.a.div(en()),rn=[{name:"switching to anki",duration:5},{name:"anki",duration:300},{name:"switching to anime",duration:5},{name:"anime",duration:300}],cn=function(){var n=function(){var n=Object(i.useState)(O),e=Object(l.a)(n,2),t=e[0],r=e[1];return Object(i.useEffect)((function(){setInterval((function(){r((function(n){return[].concat(Object(x.a)(n),[Date.now()]).slice(-2)}))}),500)}),[]),t}(),e=Object(l.a)(n,2),t=e[0],c=e[1],a=function(){var n=Object(i.useState)([]),e=Object(l.a)(n,2),t=e[0],r=e[1],c=Object(i.useState)(!1),a=Object(l.a)(c,2),o=a[0],u=a[1],s=Object(i.useState)(null),d=Object(l.a)(s,2),x=d[0],O=d[1],m=t.length;Object(i.useEffect)((function(){r(j.map((function(n){return new Audio(n)})))}),[]);var p=Object(i.useCallback)((function(){u((function(n){return n&&O(null),!n}))}),[]),h=Object(i.useCallback)(function(){var n=Object(f.a)(b.a.mark((function n(e){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o&&m>0)){n.next=15;break}if(e=(m+e)%t.length,!(t[e].readyState>=HTMLMediaElement.HAVE_CURRENT_DATA)){n.next=15;break}if(null!=t[e]){n.next=6;break}return O("audioEl[".concat(e,"] is null")),n.abrupt("return");case 6:return t[e].currentTime=0,n.prev=7,n.next=10,t[e].play();case 10:n.next=15;break;case 12:n.prev=12,n.t0=n.catch(7),O("audioEl[".concat(e,"] : ").concat(n.t0));case 15:case"end":return n.stop()}}),n,null,[[7,12]])})));return function(e){return n.apply(this,arguments)}}(),[t,m,o]);return{audio:o,switchAudio:p,playAudio:h,audioError:x}}(),o=a.audio,s=a.switchAudio,d=a.playAudio,m=v(rn),p=m.table,h=m.setTable,g=m.error,w=m.tableString,k=Object(i.useState)(0),y=Object(l.a)(k,2),C=y[0],E=y[1],S=Object(i.useState)(!1),z=Object(l.a)(S,2),T=z[0],I=z[1],R=Object(i.useState)(1e3*p[0].duration),D=Object(l.a)(R,2),F=D[0],M=D[1],N=Object(i.useState)({}),H=Object(l.a)(N,2),_=H[0],B=H[1],J=(C+1)%p.length;Object(i.useEffect)((function(){T&&M((function(n){var e=n-(c-t);return e>0?e:(d(J),E(J),B(Object(u.a)({},p[J])),1e3*p[J].duration+e)}))}),[d,C,p,T,c,t,J]),Object(i.useEffect)((function(){if(!T){var n=C<p.length?C:0;B(Object(u.a)({},p[n])),M(1e3*p[n].duration),E(n)}}),[p,T,C]);var P=Object(i.useMemo)((function(){return function(){I((function(n){return n||d(C),!n}))}}),[C,d]),V=Object(i.useCallback)((function(){I(!1),E(0),M(1e3*p[0].duration)}),[p]),q=Object(i.useCallback)((function(n){I(!1),B(Object(u.a)({},p[n])),M(1e3*p[n].duration),E(n)}),[p]);return Object(r.jsxs)(tn,{children:[g&&Object(r.jsx)(U,{children:g}),Object(r.jsx)(nn,{tableString:w}),Object(r.jsx)(A,{onRunning:P,running:T,onReset:V,audio:o,onAudio:s}),Object(r.jsx)(L,{restTime:F,currentAction:_.name,currentDuration:_.duration,nextAction:p[J].name,nextDuration:p[J].duration}),Object(r.jsx)(K,{changeTable:h,gotoAction:q,currentAction:C,children:p})]})},an=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,30)).then((function(e){var t=e.getCLS,r=e.getFID,i=e.getFCP,c=e.getLCP,a=e.getTTFB;t(n),r(n),i(n),c(n),a(n)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(cn,{})}),document.getElementById("root")),document.addEventListener("wheel",(function(n){"number"===document.activeElement.type&&document.activeElement.classList.contains("noscroll")&&document.activeElement.blur()})),an()}},[[29,1,2]]]);
//# sourceMappingURL=main.06e3c619.chunk.js.map